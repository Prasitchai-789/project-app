{% extends "layouts/base.html" %}

{% block name %}
<div class="sidebar-brand-text mx-3">ISANPALM</div>
{% endblock %}

{% block Dashboard %}
<li class="nav-item active">
    <a class="nav-link" href="rpo_po">
    <i class="fas fa-fw fa-tachometer-alt"></i>
    <span>ฝ่ายจัดซื้อปาล์ม</span></a>    
</li>
{% endblock Dashboard %}
                  

{% block content %}
    <div class="row">
        <!-- Earnings (Monthly) Card Example -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-success shadow h-100">
                <div class="card-body">
                    <div class="row no-gutters align-items-center py-0">
                        <div class="col">
                            <div class="text-xs font-weight-bold text-success text-uppercase">
                                <h3>เกษตรกร</h3></div>
                            <div class="h3 mb-0 font-weight-bold text-gray-800">
                                {{total_vendorcode_farmer_sum}} Kg.
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-calendar fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Earnings (Monthly) Card Example -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-info shadow h-100 py-0">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                <h3>ลานเท</h3></div>
                            <div class="h3 mb-0 font-weight-bold text-gray-800">{{total_vendorcode_ramps_sum}} Kg.</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Earnings (Monthly) Card Example -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-0">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-1">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1"><h3>ยอดรวมปริมาณผลปาล์ม</h3>
                            </div>
                            <div class="row no-gutters align-items-center">
                                <div class="col-auto">
                                    <div class="h3 mb-0 mr-1 font-weight-bold text-gray-800">{{total_sum}} Kg.</div>
                                </div>
                                <!-- <div class="col">
                                    <div class="progress progress-sm mr-2">
                                        <div class="progress-bar bg-info" role="progressbar"
                                            style="width: 50%" aria-valuenow="{{ total_sum }}"
                                            aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div> -->
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pending Requests Card Example -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-info shadow h-100 py-0">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1"><h3>จำนวนรายการ</h3></div>
                            <div class="h3 mb-0 font-weight-bold text-gray-800 flex-end">{{total_count}}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-comments fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Begin Page Content -->
        <div class="col-lg-12">
            <!-- Page Heading -->
            <!-- <h1 class="h1 mb-4 text-gray-800 text-center">รายการซื้อผลปาล์ม </h1> -->
            <div class="col">
                <div class="row justify-content-end py">
                    <div class="col">
                        <!-- <button class="btn btn-outline-warning" data-toggle="modal" data-target="#SetVal_PO_Modal"><i class="fas fa-cogs"></i></button>
                        <button class="btn btn-outline-primary" data-toggle="modal" data-target="#VendorModal"><i class="fas fa-user-edit"></i></i></button> -->
                        
                    </div>
                </div>
            </div>
            <!-- DataTales Example -->
            <div class="card shadow">
                <div class="card-header py-3">
                    <div class="row d-flex">
                        <div class="col">
                            <h4 class="m-0 font-weight-bold text-center">ตารางแสดงรายการซื้อผลปาล์ม</h4>
                            <button class="btn btn-outline-success" data-toggle="modal" data-target="#add_ffb_Modal" ><i class="fas fa-file-invoice"> บันทึกข้อมูล</i></button>
                        </div>
                        
                    </div>
                    {% if messages %}
                        {% for messages in messages %}  
                        <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                            <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">
                              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                            </symbol>
                            <symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16">
                              <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
                            </symbol>
                            <symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16">
                              <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                            </symbol>
                          </svg>
                          
                          <div class="alert alert-success mt-2  d-flex align-items-center" role="alert">
                            <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"/></svg>
                            <div>
                                <strong>{{messages}}</strong>
                            </div>
                          </div>
                        {% endfor %}
                    {% endif %}
                    <div class="card-body py-2 ">
                        <div class="table-responsive">
                            <table class="table table-hover nowrap text-dark font-weight-bold" id="tb_PO" width="100%" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th class="texe text-center">ลำดับ</th>
                                        <th class="texe text-center">วันที่</th>
                                        <th class="texe text-center">PO</th>
                                        <th class="texe text-center">รหัสบิล</th>
                                        <th class="texe text-center">ประเภทรถ</th>
                                        <th class="texe text-center">ทะเบียนรถ</th>
                                        <th class="texe text-center">รหัสลูกค้า</th>
                                        <th class="texe text-center">ชื่อลูกค้า</th>
                                        <th class="texe text-center">ขาเข้า</th>
                                        <th class="texe text-center">ขาออก</th>
                                        <th class="texe text-center">สุทธิ</th>
                                        <th class="texe text-center">ราคา</th>
                                        <th class="texe text-center">เกรด</th>
                                        <th class="texe text-center">เจือปน</th>
                                        <th colspan="2"class="texe text-center">เพิ่มเติม</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for ffb in all_ffb %} 
                                    <tr>
                                        <th scope="row" class="texe text-center align-middle">{{ forloop.counter }}</th>
                                        <td class="texe text-center align-middle">{{ ffb.docudate|date:"d/m/Y" }}</td>
                                        <td class="texe text-center align-middle">{{ffb.poinvid}}</td>
                                        <td class="texe text-center align-middle">{{ffb.billid}}</td>
                                        <td class="texe text-center align-middle">{{ffb.typecarid}}</td>
                                        <td class="texe text-center align-middle">{{ffb.vendorcardid}}</td>
                                        <td class="texe text-center align-middle">{{ffb.vendorcode}}</td>
                                        <td class="texe text-center align-middle">{{ffb.vendorname}}</td>
                                        <td class="texe text-center align-middle">{{ffb.goodib}}</td>
                                        <td class="texe text-center align-middle">{{ffb.goodob}}</td>
                                        <td class="texe text-center align-middle">{{ffb.goodnet}}</td>
                                        <td class="texe text-center align-middle">{{ffb.price1}}</td>
                                        <td class="texe text-center align-middle">{{ffb.grade}}</td>
                                        <td class="texe text-center align-middle">{{ffb.impurity}}</td>
                                        <td class="texe text-center align-middle"><button class="btn btn-warning" data-toggle="modal" data-target="#edit_ffb_Modal{{ffb.id}}"><i class="far fa-edit text"></i></button>
                                            <a class=" btn btn-danger far fa-trash-alt" href="delete_f/{{ffb.id}}" 
                                            onclick="return confirm('คุณต้องการลบข้อมูล {{ffb.id}} หรือไม่ ?')" 
                                            ></a>
                                        </td>
                                      </tr>
                                     {% include 'palm/edit_rpo_po.html' %}

                                    {% endfor %}
                                </tbody>
                            </table>
                            <nav aria-label="Page navigation">
                                <ul class="pagination">
                                    {% if current_page.has_previous %}
                                    <li class="page-item">
                                        <a class="page-link" href="?page={{ current_page.previous_page_number }}">Previous</a>
                                    </li>
                                    {% endif %}
                                    {% for num in current_page.paginator.page_range %}
                                    {% if current_page.number == num %}
                                    <li class="page-item active">
                                        <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                                    </li>
                                    {% else %}
                                    <li class="page-item">
                                        <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                                    </li>
                                    {% endif %}
                                    {% endfor %}
                                    {% if current_page.has_next %}
                                    <li class="page-item">
                                        <a class="page-link" href="?page={{ current_page.next_page_number }}">Next</a>
                                    </li>
                                    {% endif %}
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

    {% include 'palm/add_rpo_po.html' %}


{% endblock %}
